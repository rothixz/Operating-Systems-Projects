<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SOFS15: sofs_basicconsist.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SOFS15
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">FUSE based file system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sofs__basicconsist_8h.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sofs_basicconsist.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Set of operations to check the basic consistency of the file system SOFS15 internal data structures.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="sofs__superblock_8h_source.html">sofs_superblock.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sofs__inode_8h_source.html">sofs_inode.h</a>&quot;</code><br/>
</div>
<p><a href="sofs__basicconsist_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5872dcf507401947bb85af3828969a9d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5872dcf507401947bb85af3828969a9d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a5872dcf507401947bb85af3828969a9d">ALLOC_CLT</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a5872dcf507401947bb85af3828969a9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">status allocated of a data cluster <br/></td></tr>
<tr class="separator:a5872dcf507401947bb85af3828969a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cbbfce06aea0663868fdda18016986c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8cbbfce06aea0663868fdda18016986c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a8cbbfce06aea0663868fdda18016986c">FREE_CLT</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a8cbbfce06aea0663868fdda18016986c"><td class="mdescLeft">&#160;</td><td class="mdescRight">status free of a data cluster <br/></td></tr>
<tr class="separator:a8cbbfce06aea0663868fdda18016986c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb4e5747c49b69a259c8746c47c2e01d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adb4e5747c49b69a259c8746c47c2e01d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#adb4e5747c49b69a259c8746c47c2e01d">ESBHINVAL</a>&#160;&#160;&#160;512</td></tr>
<tr class="memdesc:adb4e5747c49b69a259c8746c47c2e01d"><td class="mdescLeft">&#160;</td><td class="mdescRight">superblock header data is inconsistent <br/></td></tr>
<tr class="separator:adb4e5747c49b69a259c8746c47c2e01d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab045eb379fcf40daf3010345685defdf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab045eb379fcf40daf3010345685defdf"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#ab045eb379fcf40daf3010345685defdf">ESBTINPINVAL</a>&#160;&#160;&#160;513</td></tr>
<tr class="memdesc:ab045eb379fcf40daf3010345685defdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">table of inodes metadata in the superblock is inconsistent <br/></td></tr>
<tr class="separator:ab045eb379fcf40daf3010345685defdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a597393b54dd8ed3bd8ba5d41f1edc154"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a597393b54dd8ed3bd8ba5d41f1edc154"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a597393b54dd8ed3bd8ba5d41f1edc154">ETINDLLINVAL</a>&#160;&#160;&#160;514</td></tr>
<tr class="memdesc:a597393b54dd8ed3bd8ba5d41f1edc154"><td class="mdescLeft">&#160;</td><td class="mdescRight">double-linked list of free inodes is inconsistent <br/></td></tr>
<tr class="separator:a597393b54dd8ed3bd8ba5d41f1edc154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5ec4e0f92dc28c272db8184ba943ebb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab5ec4e0f92dc28c272db8184ba943ebb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#ab5ec4e0f92dc28c272db8184ba943ebb">EFININVAL</a>&#160;&#160;&#160;515</td></tr>
<tr class="memdesc:ab5ec4e0f92dc28c272db8184ba943ebb"><td class="mdescLeft">&#160;</td><td class="mdescRight">free inode is inconsistent <br/></td></tr>
<tr class="separator:ab5ec4e0f92dc28c272db8184ba943ebb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24894e92453307c4af3a2d2d37adb711"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a24894e92453307c4af3a2d2d37adb711"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a24894e92453307c4af3a2d2d37adb711">ESBDZINVAL</a>&#160;&#160;&#160;516</td></tr>
<tr class="memdesc:a24894e92453307c4af3a2d2d37adb711"><td class="mdescLeft">&#160;</td><td class="mdescRight">data zone metadata in the superblock is inconsistent <br/></td></tr>
<tr class="separator:a24894e92453307c4af3a2d2d37adb711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54e13f0ca563632b85f3d48ac6be22b8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a54e13f0ca563632b85f3d48ac6be22b8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a54e13f0ca563632b85f3d48ac6be22b8">ESBFCCINVAL</a>&#160;&#160;&#160;517</td></tr>
<tr class="memdesc:a54e13f0ca563632b85f3d48ac6be22b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">free data clusters caches in the superblock are inconsistent <br/></td></tr>
<tr class="separator:a54e13f0ca563632b85f3d48ac6be22b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab48c897c5e6f5ed83ebc2a26cbf95a4d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab48c897c5e6f5ed83ebc2a26cbf95a4d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#ab48c897c5e6f5ed83ebc2a26cbf95a4d">EFCTINVAL</a>&#160;&#160;&#160;518</td></tr>
<tr class="memdesc:ab48c897c5e6f5ed83ebc2a26cbf95a4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">table of references to free data clusters is inconsistent <br/></td></tr>
<tr class="separator:ab48c897c5e6f5ed83ebc2a26cbf95a4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72864ae181588a7db8c1801b62e22cc4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a72864ae181588a7db8c1801b62e22cc4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a72864ae181588a7db8c1801b62e22cc4">EIUININVAL</a>&#160;&#160;&#160;519</td></tr>
<tr class="memdesc:a72864ae181588a7db8c1801b62e22cc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">inode in use is inconsistent <br/></td></tr>
<tr class="separator:a72864ae181588a7db8c1801b62e22cc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32786451de43fd94e0a4a28d5f2483a7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a32786451de43fd94e0a4a28d5f2483a7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a32786451de43fd94e0a4a28d5f2483a7">EDCNALINVAL</a>&#160;&#160;&#160;520</td></tr>
<tr class="memdesc:a32786451de43fd94e0a4a28d5f2483a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">data cluster is not allocated <br/></td></tr>
<tr class="separator:a32786451de43fd94e0a4a28d5f2483a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14508cb81637966ca69c6b8f46d9c046"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a14508cb81637966ca69c6b8f46d9c046"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a14508cb81637966ca69c6b8f46d9c046">ELDCININVAL</a>&#160;&#160;&#160;521</td></tr>
<tr class="memdesc:a14508cb81637966ca69c6b8f46d9c046"><td class="mdescLeft">&#160;</td><td class="mdescRight">list of data cluster references belonging to the inode is inconsistent <br/></td></tr>
<tr class="separator:a14508cb81637966ca69c6b8f46d9c046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75e7980ff84a7217a52119a2df8fb1ed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a75e7980ff84a7217a52119a2df8fb1ed"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a75e7980ff84a7217a52119a2df8fb1ed">EDIRINVAL</a>&#160;&#160;&#160;522</td></tr>
<tr class="memdesc:a75e7980ff84a7217a52119a2df8fb1ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">directory is inconsistent <br/></td></tr>
<tr class="separator:a75e7980ff84a7217a52119a2df8fb1ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6c1f77883daf8e96b860ff280a997f6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad6c1f77883daf8e96b860ff280a997f6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#ad6c1f77883daf8e96b860ff280a997f6">EDEINVAL</a>&#160;&#160;&#160;523</td></tr>
<tr class="memdesc:ad6c1f77883daf8e96b860ff280a997f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">directory entry is inconsistent <br/></td></tr>
<tr class="separator:ad6c1f77883daf8e96b860ff280a997f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5b9b973489536e1407e885ed71ede8e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad5b9b973489536e1407e885ed71ede8e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#ad5b9b973489536e1407e885ed71ede8e">EDCARDYIL</a>&#160;&#160;&#160;524</td></tr>
<tr class="memdesc:ad5b9b973489536e1407e885ed71ede8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">data cluster in the list of direct references for the given index <br/></td></tr>
<tr class="separator:ad5b9b973489536e1407e885ed71ede8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a90264d76fdede0f86bd3a00a91c1f1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5a90264d76fdede0f86bd3a00a91c1f1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a5a90264d76fdede0f86bd3a00a91c1f1">EDCNOTIL</a>&#160;&#160;&#160;525</td></tr>
<tr class="memdesc:a5a90264d76fdede0f86bd3a00a91c1f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">data cluster not in the list of direct references for the given index <br/></td></tr>
<tr class="separator:a5a90264d76fdede0f86bd3a00a91c1f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1c3921975c7b46d27e79bce2ea0e3f5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa1c3921975c7b46d27e79bce2ea0e3f5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#aa1c3921975c7b46d27e79bce2ea0e3f5">ERELPATH</a>&#160;&#160;&#160;526</td></tr>
<tr class="memdesc:aa1c3921975c7b46d27e79bce2ea0e3f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">path is relative and it is not a symbolic link <br/></td></tr>
<tr class="separator:aa1c3921975c7b46d27e79bce2ea0e3f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6a248690bcf9bac661e239e3ae792899"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a6a248690bcf9bac661e239e3ae792899">soGetMagicNumber</a> (<a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *p_sb)</td></tr>
<tr class="memdesc:a6a248690bcf9bac661e239e3ae792899"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get file system magic number.  <a href="#a6a248690bcf9bac661e239e3ae792899">More...</a><br/></td></tr>
<tr class="separator:a6a248690bcf9bac661e239e3ae792899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8516ec58cf5c22aff313287b08a9663"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#ae8516ec58cf5c22aff313287b08a9663">soGetErrorMessage</a> (int code)</td></tr>
<tr class="memdesc:ae8516ec58cf5c22aff313287b08a9663"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get error message.  <a href="#ae8516ec58cf5c22aff313287b08a9663">More...</a><br/></td></tr>
<tr class="separator:ae8516ec58cf5c22aff313287b08a9663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cf6e075201952b4fab9b36990a856a1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a7cf6e075201952b4fab9b36990a856a1">soQCheckSuperBlock</a> (<a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *p_sb)</td></tr>
<tr class="memdesc:a7cf6e075201952b4fab9b36990a856a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quick check of the superblock metadata.  <a href="#a7cf6e075201952b4fab9b36990a856a1">More...</a><br/></td></tr>
<tr class="separator:a7cf6e075201952b4fab9b36990a856a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf6057b7817e524ab0dfcc3df28b719f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#adf6057b7817e524ab0dfcc3df28b719f">soQCheckInT</a> (<a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *p_sb)</td></tr>
<tr class="memdesc:adf6057b7817e524ab0dfcc3df28b719f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quick check of the table of inodes metadata.  <a href="#adf6057b7817e524ab0dfcc3df28b719f">More...</a><br/></td></tr>
<tr class="separator:adf6057b7817e524ab0dfcc3df28b719f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac23e3ec715288899169dbedc5c0c4f6f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#ac23e3ec715288899169dbedc5c0c4f6f">soQCheckDZ</a> (<a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *p_sb)</td></tr>
<tr class="memdesc:ac23e3ec715288899169dbedc5c0c4f6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quick check of the data zone metadata.  <a href="#ac23e3ec715288899169dbedc5c0c4f6f">More...</a><br/></td></tr>
<tr class="separator:ac23e3ec715288899169dbedc5c0c4f6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e42eb96435682d6c07151c17766ee47"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a4e42eb96435682d6c07151c17766ee47">soQCheckFInode</a> (<a class="el" href="sofs__inode_8h.html#ac75a291739fb635e97b7928ceb4fba6a">SOInode</a> *p_inode)</td></tr>
<tr class="memdesc:a4e42eb96435682d6c07151c17766ee47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quick check of a free inode.  <a href="#a4e42eb96435682d6c07151c17766ee47">More...</a><br/></td></tr>
<tr class="separator:a4e42eb96435682d6c07151c17766ee47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f7409fc8868dcff3a6493ffb0f3682d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a1f7409fc8868dcff3a6493ffb0f3682d">soQCheckInodeIU</a> (<a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *p_sb, <a class="el" href="sofs__inode_8h.html#ac75a291739fb635e97b7928ceb4fba6a">SOInode</a> *p_inode)</td></tr>
<tr class="memdesc:a1f7409fc8868dcff3a6493ffb0f3682d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quick check of an inode in use.  <a href="#a1f7409fc8868dcff3a6493ffb0f3682d">More...</a><br/></td></tr>
<tr class="separator:a1f7409fc8868dcff3a6493ffb0f3682d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a040a914751be705b0ecd210d5be1bf71"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a040a914751be705b0ecd210d5be1bf71">soQCheckLRDC</a> (<a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *p_sb, <a class="el" href="sofs__inode_8h.html#ac75a291739fb635e97b7928ceb4fba6a">SOInode</a> *p_inode)</td></tr>
<tr class="memdesc:a040a914751be705b0ecd210d5be1bf71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quick check of the list of data cluster references belonging to an inode in use.  <a href="#a040a914751be705b0ecd210d5be1bf71">More...</a><br/></td></tr>
<tr class="separator:a040a914751be705b0ecd210d5be1bf71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c583308cf3a7621a77fbdca28cc58bc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a9c583308cf3a7621a77fbdca28cc58bc">soQCheckStatDC</a> (<a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *p_sb, uint32_t nClust, uint32_t *p_stat)</td></tr>
<tr class="memdesc:a9c583308cf3a7621a77fbdca28cc58bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quick check of the allocation status of a data cluster.  <a href="#a9c583308cf3a7621a77fbdca28cc58bc">More...</a><br/></td></tr>
<tr class="separator:a9c583308cf3a7621a77fbdca28cc58bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86cc02eb54dbe301143dc01fb0bec7b1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sofs__basicconsist_8h.html#a86cc02eb54dbe301143dc01fb0bec7b1">soQCheckDirCont</a> (<a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *p_sb, <a class="el" href="sofs__inode_8h.html#ac75a291739fb635e97b7928ceb4fba6a">SOInode</a> *p_inode)</td></tr>
<tr class="memdesc:a86cc02eb54dbe301143dc01fb0bec7b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quick check of the contents of a directory.  <a href="#a86cc02eb54dbe301143dc01fb0bec7b1">More...</a><br/></td></tr>
<tr class="separator:a86cc02eb54dbe301143dc01fb0bec7b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Set of operations to check the basic consistency of the file system SOFS15 internal data structures. </p>
<p>(interface file)</p>
<p>The aim is to provide a library with functionalities to check metadata consistency issues when the file system is in operation.</p>
<p>The operations are: </p>
<ul>
<li>get file system magic number </li>
<li>quick check of the superblock metadata </li>
<li>quick check of the table of inodes metadata </li>
<li>quick check of the data zone metadata </li>
<li>quick check of a free inode </li>
<li>quick check of an inode in use </li>
<li>quick check of the list of data cluster references belonging to an inode in use </li>
<li>quick check of the allocation status of a data cluster </li>
<li>quick check of the contents of a directory </li>
<li>get error message.</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>António Rui Borges - September 2010 / September 2012</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>In case an error occurs, all functions return a negative value which is the symmetric of the system error or the local error that better represents the error cause. Local errors are out of the range of the system errors and their codes are listed bellow. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae8516ec58cf5c22aff313287b08a9663"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* soGetErrorMessage </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get error message. </p>
<p>The error message matching a given error code is fetched.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>error code</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>message error</em>, on success </dd>
<dd>
<em>unknown</em>, if the error code is out of range </dd></dl>

</div>
</div>
<a class="anchor" id="a6a248690bcf9bac661e239e3ae792899"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t soGetMagicNumber </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *&#160;</td>
          <td class="paramname"><em>p_sb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get file system magic number. </p>
<p>The value stored in the <code>magic</code> field of the superblock is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_sb</td><td>pointer to a buffer where the superblock data is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>magic number</em>, on success </dd>
<dd>
<code>0xFFFF</code>, if the pointer to the superblock is <code>NULL</code> </dd></dl>

</div>
</div>
<a class="anchor" id="a86cc02eb54dbe301143dc01fb0bec7b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int soQCheckDirCont </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *&#160;</td>
          <td class="paramname"><em>p_sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sofs__inode_8h.html#ac75a291739fb635e97b7928ceb4fba6a">SOInode</a> *&#160;</td>
          <td class="paramname"><em>p_inode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quick check of the contents of a directory. </p>
<p>The inode, which is passed as an argument, should be in use and represent a directory. The contents of the entries of the directory are checked for consistency. Only legal values are allowed, meaning that each directory entry is either in use or is free; the first two entries must have names "." and ".." respectively.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_sb</td><td>pointer to a buffer where the superblock is stored </td></tr>
    <tr><td class="paramname">p_inode</td><td>pointer to a buffer where the inode (supposedly represents a directory) is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>0 (zero)</code>, on success </dd>
<dd>
-<code>EINVAL</code>, if any of the pointers is <code>NULL</code> </dd>
<dd>
-<code>ENOTDIR</code>, if it is not a directory </dd>
<dd>
-<code>EDIRINVAL</code>, if it the directory is inconsistent </dd>
<dd>
-<code>EDEINVAL</code>, if it the directory entry is inconsistent </dd>
<dd>
-<code>EIUININVAL</code>, if the inode in use is inconsistent </dd>
<dd>
-<code>ELDCININVAL</code>, if the list of data cluster references belonging to an inode is inconsistent </dd>
<dd>
-<code>EBADF</code>, if the device is not already opened </dd>
<dd>
-<code>EIO</code>, if it fails on reading or writing </dd>
<dd>
-<code>ELIBBAD</code>, if the buffercache is inconsistent or the superblock or a data block was not previously loaded on a previous store operation </dd>
<dd>
-<em>other specific error</em> issued by <em>lseek</em> system call </dd></dl>

</div>
</div>
<a class="anchor" id="ac23e3ec715288899169dbedc5c0c4f6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int soQCheckDZ </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *&#160;</td>
          <td class="paramname"><em>p_sb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quick check of the data zone metadata. </p>
<p>Both the associated fields in the superblock, the two data clusters and the table of references to free data clusters are checked for consistency. All fields must have legal values. In particular, the number of free data clusters computed through inspection of the two free data cluster caches and the table of references to free data clusters must match the value stored in the related field of the superblock. The contents of the two caches and the table of references are also checked: the references stored there must be legal.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_sb</td><td>pointer to a buffer where the superblock data is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>0 (zero)</code>, on success </dd>
<dd>
-<code>EINVAL</code>, if the pointer is <code>NULL</code> </dd>
<dd>
-<code>ESBDZINVAL</code>, if the data zone metadata in the superblock is inconsistent </dd>
<dd>
-<code>ESBFCCINVAL</code>, if the free data clusters caches in the superblock are inconsistent </dd>
<dd>
-<code>EFCTINVAL</code>, if the table of references to free data clusters is inconsistent </dd>
<dd>
-<code>EBADF</code>, if the device is not already opened </dd>
<dd>
-<code>EIO</code>, if it fails on reading or writing </dd>
<dd>
-<code>ELIBBAD</code>, if the buffercache is inconsistent or the superblock or a data block was not previously loaded on a previous store operation </dd>
<dd>
-<em>other specific error</em> issued by <em>lseek</em> system call </dd></dl>

</div>
</div>
<a class="anchor" id="a4e42eb96435682d6c07151c17766ee47"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int soQCheckFInode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sofs__inode_8h.html#ac75a291739fb635e97b7928ceb4fba6a">SOInode</a> *&#160;</td>
          <td class="paramname"><em>p_inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quick check of a free inode. </p>
<p>The contents of the <code>mode</code> and <code>refcount</code> fields of the inode are checked for consistency.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_inode</td><td>pointer to a buffer where the inode is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>0 (zero)</code>, on success </dd>
<dd>
-<code>EINVAL</code>, if the pointer is <code>NULL</code> </dd>
<dd>
-<code>EFININVAL</code>, if the free inode is inconsistent </dd></dl>

</div>
</div>
<a class="anchor" id="a1f7409fc8868dcff3a6493ffb0f3682d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int soQCheckInodeIU </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *&#160;</td>
          <td class="paramname"><em>p_sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sofs__inode_8h.html#ac75a291739fb635e97b7928ceb4fba6a">SOInode</a> *&#160;</td>
          <td class="paramname"><em>p_inode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quick check of an inode in use. </p>
<p>The contents of all the fields of the inode, except <code>owner</code>, <code>group</code>, <code>size</code> and <code>refcount</code>, are checked for consistency. Only legal values are allowed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_sb</td><td>pointer to a buffer where the superblock is stored </td></tr>
    <tr><td class="paramname">p_inode</td><td>pointer to a buffer where the inode is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>0 (zero)</code>, on success </dd>
<dd>
-<code>EINVAL</code>, if any of the pointers is <code>NULL</code> </dd>
<dd>
-<code>EIUININVAL</code>, if the inode in use is inconsistent </dd>
<dd>
-<code>ELDCININVAL</code>, if the list of data cluster references belonging to an inode is inconsistent </dd>
<dd>
-<code>EBADF</code>, if the device is not already opened </dd>
<dd>
-<code>EIO</code>, if it fails on reading or writing </dd>
<dd>
-<code>ELIBBAD</code>, if the buffercache is inconsistent or the superblock or a data block was not previously loaded on a previous store operation </dd>
<dd>
-<em>other specific error</em> issued by <em>lseek</em> system call </dd></dl>

</div>
</div>
<a class="anchor" id="adf6057b7817e524ab0dfcc3df28b719f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int soQCheckInT </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *&#160;</td>
          <td class="paramname"><em>p_sb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quick check of the table of inodes metadata. </p>
<p>Both the associated fields in the superblock and the table of inodes are checked for consistency. All fields must have legal values. In particular, the number of free inodes computed through inspection of the list of free inodes must match the value stored in the related field of the superblock.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_sb</td><td>pointer to a buffer where the superblock data is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>0 (zero)</code>, on success </dd>
<dd>
-<code>EINVAL</code>, if the pointer is <code>NULL</code> </dd>
<dd>
-<code>ESBTINPINVAL</code>, if the table of inodes metadata in the superblock is inconsistent </dd>
<dd>
-<code>ETINDLLINVAL</code>, if the double-linked list of free inodes is inconsistent </dd>
<dd>
-<code>EFININVAL</code>, if the free inode is inconsistent </dd>
<dd>
-<code>EBADF</code>, if the device is not already opened </dd>
<dd>
-<code>EIO</code>, if it fails on reading or writing </dd>
<dd>
-<code>ELIBBAD</code>, if the buffercache is inconsistent or the superblock or a data block was not previously loaded on a previous store operation </dd>
<dd>
-<em>other specific error</em> issued by <em>lseek</em> system call </dd></dl>

</div>
</div>
<a class="anchor" id="a040a914751be705b0ecd210d5be1bf71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int soQCheckLRDC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *&#160;</td>
          <td class="paramname"><em>p_sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sofs__inode_8h.html#ac75a291739fb635e97b7928ceb4fba6a">SOInode</a> *&#160;</td>
          <td class="paramname"><em>p_inode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quick check of the list of data cluster references belonging to an inode in use. </p>
<p>All the clusters referenced in the list must have legal logical numbers and be allocated and the <code>clucount</code> field must have a value set in accordance to the filling of the list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_sb</td><td>pointer to a buffer where the superblock is stored </td></tr>
    <tr><td class="paramname">p_inode</td><td>pointer to a buffer where the inode is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>0 (zero)</code>, on success </dd>
<dd>
-<code>EINVAL</code>, if either of the pointers is <code>NULL</code> </dd>
<dd>
-<code>ELDCININVAL</code>, if the list of data cluster references belonging to the inode is inconsistent </dd>
<dd>
-<code>EBADF</code>, if the device is not already opened </dd>
<dd>
-<code>EIO</code>, if it fails on reading or writing </dd>
<dd>
-<code>ELIBBAD</code>, if the buffercache is inconsistent or the superblock or a data block was not previously loaded on a previous store operation </dd>
<dd>
-<em>other specific error</em> issued by <em>lseek</em> system call </dd></dl>

</div>
</div>
<a class="anchor" id="a9c583308cf3a7621a77fbdca28cc58bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int soQCheckStatDC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *&#160;</td>
          <td class="paramname"><em>p_sb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nClust</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>p_stat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quick check of the allocation status of a data cluster. </p>
<p>The caches and the table of references to free data clusters are searched to check if they include the reference to the data cluster. If the reference is there, the data cluster is marked as free; otherwise, it marked as allocated.</p>
<p>The status is returned in the following way </p>
<ul>
<li><code>ALLOC_CLT</code>, if the data cluster is allocated </li>
<li><code>FREE_CLT</code>, if the data cluster is free.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_sb</td><td>pointer to a buffer where the superblock is stored </td></tr>
    <tr><td class="paramname">nClust</td><td>logical number of the data cluster </td></tr>
    <tr><td class="paramname">p_stat</td><td>pointer to a location where the allocation status is stored on success</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>0 (zero)</code>, on success </dd>
<dd>
-<code>EINVAL</code>, if either of the pointers is <code>NULL</code> or the logical number of the data cluster is out of range </dd>
<dd>
-<code>EBADF</code>, if the device is not already opened </dd>
<dd>
-<code>EIO</code>, if it fails on reading or writing </dd>
<dd>
-<code>ELIBBAD</code>, if the buffercache is inconsistent or the superblock or a data block was not previously loaded on a previous store operation </dd>
<dd>
-<em>other specific error</em> issued by <em>lseek</em> system call </dd></dl>

</div>
</div>
<a class="anchor" id="a7cf6e075201952b4fab9b36990a856a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int soQCheckSuperBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sofs__superblock_8h.html#ab3d7af66934f6eb4e2f28e2918b88133">SOSuperBlock</a> *&#160;</td>
          <td class="paramname"><em>p_sb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quick check of the superblock metadata. </p>
<p>The file system layout as described in the superblock header is checked first. Then follows the checking of the metadata of the table of inodes and the data zone.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_sb</td><td>pointer to a buffer where the superblock data is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>0 (zero)</code>, on success </dd>
<dd>
-<code>EINVAL</code>, if the pointer to the superblock is <code>NULL</code> </dd>
<dd>
-<code>ESBHINVAL</code>, if the superblock header data is inconsistent </dd>
<dd>
-<code>ESBTINPINVAL</code>, if the table of inodes metadata in the superblock is inconsistent </dd>
<dd>
-<code>ETINDLLINVAL</code>, if the double-linked list of free inodes is inconsistent </dd>
<dd>
-<code>EFININVAL</code>, if the free inode is inconsistent </dd>
<dd>
-<code>ESBDZINVAL</code>, if the data zone metadata in the superblock is inconsistent </dd>
<dd>
-<code>ESBFCCINVAL</code>, if the free data clusters caches in the superblock are inconsistent </dd>
<dd>
-<code>EFCDLLINVAL</code>, if the double-linked list of free data clusters is inconsistent </dd>
<dd>
-<code>EDCINVAL</code>, if the data cluster header is inconsistent </dd>
<dd>
-<code>EBADF</code>, if the device is not already opened </dd>
<dd>
-<code>EIO</code>, if it fails on reading or writing </dd>
<dd>
-<code>ELIBBAD</code>, if the buffercache is inconsistent or the superblock or a data block was not previously loaded on a previous store operation </dd>
<dd>
-<em>other specific error</em> issued by <em>lseek</em> system call </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_f68df188f887538d2ebe3f1167d956ea.html">sofs15</a></li><li class="navelem"><a class="el" href="sofs__basicconsist_8h.html">sofs_basicconsist.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
